language: java
jdk: oraclejdk8
before_install:
- wget http://www.htacg.org/binaries/binaries/tidy-4.9.23/tidy5-4.9.23-32bit.deb
- sudo dpkg -i tidy5-4.9.23-32bit.deb
- rm tidy5-4.9.23-32bit.deb

script: mvn -Dtest=ValidationTest,BasicTest test -B

deploy:
  provider: s3
  bucket: schema.labs.datacite.org
  endpoint: schema.labs.datacite.org.s3-website-us-east-1.amazonaws.com
  local_dir: www
  acl: public_read
  on:
    repo: datacite/schema
    branch: labs
env:
  global:
    secure: A+jST7CBxLM2DgPY7aSO83+5EHW1DBe4s5dGki/ijZB8hFbByiYGO/d7vA391PNDR0w+p+xs42rDBmOhrLWEV2F91vj9bEqPjZlyITl9KjBWKqScvfRmRCHjs2Ocjov1zeaQLBul9fxOGHIRQozQmWWi+ImlryuTVw8BtTh0HtQ=
